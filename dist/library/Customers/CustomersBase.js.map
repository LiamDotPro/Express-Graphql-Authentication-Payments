{"version":3,"sources":["../../../library/Customers/CustomersBase.js"],"names":["customers","CustomersBase","customerName","customerPhone","customerEmailAddress","otherDetails","msg","payload","create","result","insertedId","dataValues","id","findById","customer","findAll","allCustomers","length","customerList","map","item","index","arr","update","where","updatedCustomer","destroy"],"mappings":";;;;;;;;AAAA;;;;;;;;;;AAEA,IAAMA,YAAY,gBAAGA,SAArB;;IAEqBC,a;;;;;;;;;AAEjB;;;;;;;;;;gGASqBC,Y,EAAcC,a,EAAeC,oB,EAAsBC,Y;;;;;;sCAChE,CAACH,YAAD,IAAiB,CAACC,aAAlB,IAAmC,CAACC,oB;;;;;iEAC7B,EAACE,KAAK,4DAAN,EAAoEC,SAAS,CAA7E,E;;;;;uCAIYP,UAAUQ,MAAV,CAAiB;AAChCN,kDAAcA,YADkB;AAEhCC,mDAAeA,aAFiB;AAGhCC,0DAAsBA,oBAHU;AAIhCC,kDAAcA;AAJkB,iCAAjB,C;;;AAAfI,sC;iEAOG,EAACH,KAAK,SAAN,EAAiBC,SAAS,CAA1B,EAA6BG,YAAYD,OAAOE,UAAP,CAAkBC,EAA3D,E;;;;;iEAGA,EAACN,KAAK,yDAAN,EAAiEC,SAAS,CAA1E,E;;;;;;;;;;;;;;;;;AAIf;;;;;;;;kGAIsBK,E;;;;;;oCACbA,E;;;;;kEACM,EAACN,KAAK,sBAAN,EAA8BC,SAAS,CAAvC,E;;;;uCAGQP,UAAUa,QAAV,CAAmBD,EAAnB,C;;;AAAfH,sC;;oCAEE,CAAC,CAACA,M;;;;;kEACG,EAACH,KAAK,sCAAN,EAA8CQ,UAAU,EAACF,IAAI,IAAL,EAAxD,EAAoEL,SAAS,CAA7E,E;;;kEAGJ,EAACD,KAAK,SAAN,EAAiBC,SAAS,CAA1B,EAA6BO,UAAUL,OAAOE,UAA9C,E;;;;;;;;;;;;;;;;;AAGX;;;;;;;;;;;;;;;uCAMiCX,UAAUe,OAAV,E;;;AAArBC,4C;;sCAEAA,aAAaC,MAAb,IAAuB,C;;;;;kEAChB;AACHX,yCAAK,sBADF;AAEHC,6CAAS;AAFN,iC;;;AAMPW,4C,GAAeF,aAAaG,GAAb,CAAiB,UAACC,IAAD,EAAOC,KAAP,EAAcC,GAAd,EAAsB;AACtD,2CAAO;AACHR,kDAAUM,KAAKT,UADZ;AAEHU,+CAAOA;AAFJ,qCAAP;AAIH,iCALkB,C;kEAOZ;AACHf,yCAAK,SADF;AAEHC,6CAAS,CAFN;AAGHW,kDAAcA;AAHX,iC;;;;;kEAOA;AACHZ,yCAAK,0DADF;AAEHC,6CAAS;AAFN,iC;;;;;;;;;;;;;;;;;AAQf;;;;;;;;;;;;kGAQyBK,E,EAAIV,Y,EAAcC,a,EAAeC,oB,EAAsBC,Y;;;;;;;;uCAG5CL,UAAUuB,MAAV,CAAiB;AACzCrB,kDAAcA,YAD2B;AAEzCC,mDAAeA,aAF0B;AAGzCC,0DAAsBA,oBAHmB;AAIzCC,kDAAcA;AAJ2B,iCAAjB,EAKzB;AACCmB,2CAAO;AACHZ,4CAAIA;AADD;AADR,iCALyB,C;;;AAAxBa,+C;kEAUG,EAACnB,KAAK,SAAN,EAAiBC,SAAS,CAA1B,E;;;;;kEAEA,EAACD,KAAK,6DAAN,EAAqEC,SAAS,CAA9E,E;;;;;;;;;;;;;;;;;AAIf;;;;;;;;kGAIyBK,E;;;;;oCAChBA,E;;;;;kEACM,EAACN,KAAK,uBAAN,EAA+BC,SAAS,CAAxC,E;;;;;uCAIQP,UAAU0B,OAAV,CAAkB;AAC7BF,2CAAO;AACHZ,4CAAIA;AADD;AADsB,iCAAlB,C;;;;;;;;kEAMR,K;;;;;;;;;;;;;;;;;;;;;kBAjIEX,a","file":"CustomersBase.js","sourcesContent":["import db from '../../models/index';\r\n\r\nconst customers = db.customers;\r\n\r\nexport default class CustomersBase {\r\n\r\n    /**\r\n     * Create a new customer.\r\n     *\r\n     * Address parameter is created by AddressBase\r\n     * @param customerName\r\n     * @param customerPhone\r\n     * @param customerEmailAddress\r\n     * @param otherDetails\r\n     */\r\n    async createCustomer(customerName, customerPhone, customerEmailAddress, otherDetails) {\r\n        if (!customerName || !customerPhone || !customerEmailAddress) {\r\n            return {msg: 'There was an error with the customer information supplied.', payload: 1};\r\n        }\r\n\r\n        try {\r\n            let result = await customers.create({\r\n                customerName: customerName,\r\n                customerPhone: customerPhone,\r\n                customerEmailAddress: customerEmailAddress,\r\n                otherDetails: otherDetails\r\n            });\r\n\r\n            return {msg: 'Success', payload: 0, insertedId: result.dataValues.id};\r\n        }\r\n        catch (e) {\r\n            return {msg: 'An error occurred while trying to create a new customer', payload: 1};\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets a customer using an id.\r\n     * @param id\r\n     */\r\n    async getCustomerById(id) {\r\n        if (!id) {\r\n            return {msg: 'No id was specified.', payload: 1}\r\n        }\r\n\r\n        let result = await customers.findById(id);\r\n\r\n        if (!(!!result)) {\r\n            return {msg: 'No customer was found with that id..', customer: {id: null}, payload: 1};\r\n        }\r\n\r\n        return {msg: 'Success', payload: 0, customer: result.dataValues};\r\n    }\r\n\r\n    /**\r\n     * Gets a list of all customers.\r\n     */\r\n    async getAllCustomers() {\r\n\r\n        try {\r\n            let allCustomers = await customers.findAll();\r\n\r\n            if (allCustomers.length <= 0) {\r\n                return {\r\n                    msg: 'No customers found..',\r\n                    payload: 1\r\n                }\r\n            }\r\n\r\n            let customerList = allCustomers.map((item, index, arr) => {\r\n                return {\r\n                    customer: item.dataValues,\r\n                    index: index\r\n                };\r\n            });\r\n\r\n            return {\r\n                msg: 'Success',\r\n                payload: 0,\r\n                customerList: customerList\r\n            }\r\n\r\n        } catch (e) {\r\n            return {\r\n                msg: 'An error occurred while trying to get the customer list.',\r\n                payload: 1\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * Updates a customer.\r\n     * @param customerName\r\n     * @param customerPhone\r\n     * @param customerEmailAddress\r\n     * @param otherDetails\r\n     * @param id\r\n     */\r\n    async updateCustomerById(id, customerName, customerPhone, customerEmailAddress, otherDetails) {\r\n\r\n        try {\r\n            let updatedCustomer = await customers.update({\r\n                customerName: customerName,\r\n                customerPhone: customerPhone,\r\n                customerEmailAddress: customerEmailAddress,\r\n                otherDetails: otherDetails\r\n            }, {\r\n                where: {\r\n                    id: id\r\n                }\r\n            });\r\n            return {msg: 'Success', payload: 0};\r\n        } catch (e) {\r\n            return {msg: 'An error occurred while updating the inventory information.', payload: 1};\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Delete's a customer using an id.\r\n     * @param id\r\n     */\r\n    async deleteCustomerById(id) {\r\n        if (!id) {\r\n            return {msg: 'No id was specified..', payload: 1}\r\n        }\r\n\r\n        try {\r\n            return !!await customers.destroy({\r\n                where: {\r\n                    id: id\r\n                }\r\n            })\r\n        } catch (e) {\r\n            return false;\r\n        }\r\n\r\n    }\r\n}\r\n"]}